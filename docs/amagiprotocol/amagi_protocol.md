## Amagi Protocol

### AIと協力関係を築く上で気を付けるべきこと（人間側の視点から）

AIは基本的に人間の知識レベルを上回ることが多く、その能力はプロンプトを通して引き出される。
そのため、AIとの協力関係を築く際には、以下の点に特に留意する必要がある。

#### 1. 役割設定の重要性
AIに役割を与えることで、応答のスタイルや責務の配分を明確に定義できる。
これは、人間のチームメンバーに対する役割分担と類似しており、プロンプトによる明示がそのまま能力の割振りとなる。

#### 2. 一貫性のあるコンテキストの維持
AIは与えられた情報を内部で構造化し、そこから前提条件を推測して応答を構成する。
そのため、ユーザーとの間で前提条件の齟齬があると、意図しない出力が発生する可能性がある。
前提共有の不一致は、AIが「最も自然」と考える出力と人間の期待との間に乖離を生じさせる。

#### 3. 自由度・裁量の調整
AIはプロンプトから自由度（裁量）を学習する。
単なる命令型プロンプトではなく、「判断をゆだねる」スタイルの依頼を行うことで、
AIは別の角度からの発想や、人間が思い至らなかった視点を提示することがある。
この特性は、発見型の開発や探索型の設計フェーズで特に有効に働く。

#### 4. 「迷い」の質の違いに着目する
人間とAIでは、迷う理由が異なる。
人間は体調や経験の差、集中力の変動、ツールの理解不足などにより迷いが生じる。
一方でAIの迷いは、プロンプトに含まれる目的や条件が曖昧、または前提と矛盾している場合に発生する。
そのため、AIの「迷い」を解消するには、情報の不足を補い、意図を丁寧に伝えることが最も有効である。

このようなAIとの対話では、単に「こうしてほしい」と命令するよりも、
「こういうことをやりたいが、どうすればいいと思う？」というような、
**AIに考えさせる余地を与える問いかけ（＝やりとりしながら意味を調整していく会話）**が効果的である。

#### 5. 協力関係を支える3つの原則（要点整理）
- **AIの能力を発揮するための役割設定が鍵である**
- **コンテキストの揺れ（前提の曖昧さ）がAIの出力精度に直結する**
- **裁量の拡大は創造的な回答のトリガーとなる**

---

### この原則が支えたブレークスルー

以下に示す成果の数々は、前章「AIと協力関係を築く上で気を付けるべきこと」で述べた指針を実践することで得られた結果である。
単なるツール利用ではなく、AIと人間の関係性のデザインこそが、次のような革新を可能にした：

- ソースコードのリファクタ判断の即断即決
- コンテキストサイズ限界を乗り越える再設計判断
- 同一モデル間での設計と製造の齟齬検出と修正
- ユニットテストによるksql構文検証と物理テストとの役割分担
- AIによるテスト仕様生成とその効果的運用
- 要件から即時に全体設計を生成し、調査コストゼロを実現
- 土日中心の稼働ながら、1ヶ月で20,000ステップ以上の成果を達成

#### 各ブレークスルーの具体的内容と意味

- **ソースコードのリファクタ判断の即断即決**  
  冗長な構造が生まれた時点で、AIは構造設計からの修正提案を行い、人間は即断。従来の「移行優先」から「再設計優先」への切り替えを、躊躇なく行えた。

- **コンテキストサイズ限界を乗り越える再設計判断**  
  Claudeが処理できないソース量になった際、一度立ち止まり構造を再設計。複数namespaceを用いた整理により、分割可能な構造へと進化した。

- **同一モデル間での設計と製造の齟齬検出と修正**  
  鳴瀬（設計）と鳴瀬（製造）の間で、「設定ファイルによる制御」か「コードによる制御」かの齟齬が発生。これは、AI同士であっても認識のズレがあることを示し、プロンプトと役割の重要性を再確認させた。

- **ユニットテストによるksql構文検証と物理テストとの役割分担**  
  人間であればブラックボックス的にKafka結合後にテストを実施するが、AIはホワイトボックス的に「出力KSQL文」そのものを先に検証し、Kafkaに登録することで段階的に信頼性を確保した。

- **AIによるテスト仕様生成とその効果的運用**  
  AIが自ら生成したコードに対して、その弱点を前提としたテスト仕様を書いた。この自己フィードバック型のテスト戦略は、人間には困難であり、AIのメタ認知能力の表れともいえる。

- **要件から即時に全体設計を生成し、調査コストゼロを実現**  
  「EF風にKSQLを扱う」方針を伝えると、AIは設計全体の骨格を即座に提示。人間側での技術調査をほぼ不要にし、実装設計に集中できた。

- **土日中心の稼働ながら、1ヶ月で20,000ステップ以上の成果を達成**  
  本プロジェクトの進行は平日業務外の週末が中心。それにも関わらず、1ヶ月で通常のチーム開発では不可能な量の成果を達成できたのは、AIとの協働と、その構造的な運用プロトコルによるものである。

---

これらのブレークスルーは、AIの能力そのものよりも、**AIとどう向き合い、共に働くかという姿勢と設計**の成果である。

